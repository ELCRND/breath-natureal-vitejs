class t{constructor(t,i,e,s){this.SLIDER=document.querySelector(t),this.WRAPPER=this.SLIDER.querySelector(".slider-wrapper"),this.LIST=this.SLIDER.querySelector(".slider-list"),this.PREV=this.SLIDER.querySelector(".slider-btn--prev"),this.NEXT=this.SLIDER.querySelector(".slider-btn--next"),this.PAGINATION_CONTAINER=i?this.SLIDER.querySelector(".slider-pagination"):null,this.gap=0,this.slideSize=0,this.totalSlides=0,this.visibleSlides=0,this.currentSlide=0,this.isPagination=i||!1,this.isAllScreen=e||!1,this.isAnimation=s||!1,this.isAnimationPlay=!1,this.touchStartX=0,this.touchEndX=0,this.touchStartY=0,this.touchEndY=0,this.minSwipeDistance=50,this.handlePrev=()=>this.prev(),this.handleNext=()=>this.next(),this.handleResize=()=>this.resize(),this.handlePagination=t=>this.pagination(t),this.handleTouchStart=t=>this.touchStart(t),this.handleTouchEnd=t=>this.touchEnd(t),this.init()}get offset(){return(this.slideSize+this.gap)*this.currentSlide}get isMobile(){return window.matchMedia("(max-width: 767px)").matches}get isLast(){return this.currentSlide>=this.totalSlides-1}get isFirst(){return this.currentSlide<=0}init(){this.LIST.firstElementChild&&(this.setSize(),this.setVisibleSlidesCount(),this.setGap(),this.setTotal(),this.on())}setSize(){this.slideSize=this.LIST.getBoundingClientRect().width}setVisibleSlidesCount(){this.visibleSlides=this.getVisibleHorizontalItems(this.LIST)}setGap(){this.gap=parseInt(window.getComputedStyle(this.LIST).gap)||0}setTotal(){this.totalSlides=this.LIST.childElementCount}setPaginationBtns(){for(let t=0;t<this.totalSlides;t++)this.PAGINATION_CONTAINER?.appendChild(this.createPaginationBtn(t))}createPaginationBtn(t){const i=document.createElement("button");return i.type="button",i.classList.add("slider-bullet"),i.setAttribute("data-pagination",t),i.ariaLabel=t+1+" слайд",t==this.currentSlide&&i.classList.add("slider-bullet--active"),i.addEventListener("click",this.handlePagination),i}on(){this.PREV.addEventListener("click",this.handlePrev),this.NEXT.addEventListener("click",this.handleNext),this.LIST.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),this.LIST.addEventListener("touchend",this.handleTouchEnd,{passive:!0}),window.addEventListener("resize",this.handleResize),this.isPagination&&(this.isAllScreen||this.isMobile)&&(this.setPaginationBtns(),this.isPagination=!0)}off(){this.PREV.removeEventListener("click",this.handlePrev),this.NEXT.removeEventListener("click",this.handleNext),this.LIST.removeEventListener("touchstart",this.handleTouchStart),this.LIST.removeEventListener("touchend",this.handleTouchEnd),window.removeEventListener("resize",this.handleResize)}touchStart(t){this.touchStartX=t.changedTouches[0].screenX,this.touchStartY=t.changedTouches[0].screenY}touchEnd(t){this.touchEndX=t.changedTouches[0].screenX,this.touchEndY=t.changedTouches[0].screenY,this.swipe()}swipe(){const t=this.touchEndX-this.touchStartX,i=this.touchEndY-this.touchStartY;Math.abs(t)>Math.abs(i)&&Math.abs(t)>this.minSwipeDistance&&(t>0?this.prev():this.next())}prev(){this.isFirst||(this.currentSlide--,this.update(),this.checkBlockBtns())}next(){this.isLast||(this.currentSlide++,this.update(),this.checkBlockBtns())}update(){this.LIST.style=`translate: -${this.offset}px 0`,this.isPagination&&this.updatePagination(),this.isAnimation&&this.animation()}animation(){this.isAnimationPlay||(this.isAnimationPlay=!0,this.LIST.classList.add("sliding"),setTimeout(()=>{this.LIST.classList.remove("sliding"),this.isAnimationPlay=!1},300))}resize(){this.setVisibleSlidesCount(),this.setSize(),this.isMobile||(this.currentSlide=0,this.checkBlockBtns()),this.update()}pagination(t){const i=t.target.getAttribute("data-pagination");Number.isNaN(i)||(this.currentSlide=parseInt(i),this.update(),this.updatePagination(),this.checkBlockBtns())}updatePagination(){this.PAGINATION_CONTAINER?.childNodes.forEach((t,i)=>{i==this.currentSlide?t.classList.add("slider-bullet--active"):t.classList.remove("slider-bullet--active")})}getVisibleHorizontalItems(t){const i=t.getBoundingClientRect();return Array.from(t.children).filter(t=>{const e=t.getBoundingClientRect();return e.left>=i.left&&e.right<=i.right}).length}checkBlockBtns(){this.PREV.disabled=!1,this.NEXT.disabled=!1,this.isFirst&&(this.PREV.disabled=!0),this.isLast&&(this.NEXT.disabled=!0)}}export{t as Slider};
